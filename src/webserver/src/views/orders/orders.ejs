<div class="w-fit mx-auto mt-4">
  <% if (locals.noOrders) { %>
  <div>
    <h1 class="text-2xl text-gray-900 font-bold">You have no orders</h1>
  </div>
  <% } %> <% if (!locals.noOrders) { %>
  <div class="mb-6">
    <h1 class="text-2xl text-gray-900 font-bold">Order history</h1>
  </div>
  <% } %>
  <div class="flex flex-col gap-6">
    <% locals.orders.map((order) => { %>
    <div id="order-<%- order.id %>" class="border rounded-md shadow-sm">
      <div class="p-6 flex flex-row gap-6 items-center border-b">
        <div class="flex gap-x-6 items-center justify-between">
          <div>
            <h3 class="text-gray-800 font-semibold">Order number</h3>
            <h3 class="text-gray-600"><%= order.id %></h3>
          </div>
          <div>
            <!-- TODO: Format date -->
            <h3 class="text-gray-800 font-semibold">Date placed</h3>
            <h3 class="text-gray-600"><%= order.created_at %></h3>
          </div>
          <div>
            <h3 class="text-gray-800 font-semibold">Total amount</h3>
            <h3 class="text-gray-600">$<%= order.total_price %></h3>
          </div>
        </div>
      </div>
      <ul role="list" class="flex flex-col divide-y">
        <% order.items.map((item) => { %>
        <li id="order-item-<%- item.id %>" class="p-4 sm:p-6">
          <div class="flex items-center sm:items-start">
            <div
              class="w-20 h-20 sm:w-40 sm:h-40 overflow-hidden rounded-md shrink-0"
            >
              <img
                src="<%- item.image_url %>"
                alt="<%- item.title %>"
                class="w-full h-full object-cover object-center"
              />
            </div>
            <div class="ml-6">
              <div
                class="flex flex-col gap-2 sm:gap-0 sm:flex-row sm:justify-between font-semibold"
              >
                <h5><%= item.title %></h5>
                <p>$<%= item.price %></p>
              </div>
              <p class="hidden sm:block m-0 sm:mt-2 text-gray-600">
                <%= item.description %>
              </p>
            </div>
          </div>
          <div class="mt-6">
            <div
              class="flex items-center justify-around sm:justify-start sm:gap-x-2"
            >
              <div class="w-full sm:w-fit flex justify-center font-semibold">
                <button class="text-blue-600 hover:text-blue-500">
                  View product
                </button>
              </div>
              <div
                class="w-full sm:w-fit flex justify-center font-semibold border-l sm:pl-2"
              >
                <button class="text-blue-600 hover:text-blue-500">
                  Buy again
                </button>
              </div>
            </div>
          </div>
        </li>
        <% }) %>
      </ul>
    </div>
    <% }) %>
  </div>
</div>
